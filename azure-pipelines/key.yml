

trigger:
- key

pr:
- key

variables:
  system.debug: 'true'
  ref.data.home: '$(Agent.BuildDirectory)/tardis-refdata'

  ref.data.github.url: 'https://github.com/Youssef15015/tardis-refdata.git'
  tardis.build.dir: $(Build.Repository.LocalPath)

  travis.repo.slug: 'Youssef15015/tardis'



jobs:



- job: 'Test'
  pool:
    vmImage: $[variables.vm_Image]


  strategy:
    matrix:
      linux:
        vm_Image: 'Ubuntu-16.04'
        conda: '/usr/share/miniconda'
    maxParallel: 4





# Download Secure File
# Download a secure file to a temporary location on the build or release agent
  - task: DownloadSecureFile@1
    inputs: 
      secureFile: 'id_azure_rsa'

  - task: DownloadSecureFile@1
    inputs: 
      secureFile: 'id_azure_rsa.pub'

  - bash: |
        ls $(Agent.TempDirectory)
    displayName: Check for downloaded secure files


# Install SSH Key
# Install an SSH key prior to a build or release
  - task: InstallSSHKey@0
    inputs:
     hostName: knownHostsEntry
     sshPublicKey: 'id_azure_rsa.pub' 
     #sshPassphrase: # Optional $(Agent.TempDirectory)
     sshKeySecureFile: 'id_azure_rsa'
